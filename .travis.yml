language: c

before_install:
 - echo "deb http://repo.universe-factory.net/debian/ sid main" | sudo tee -a /etc/apt/sources.list
 - echo "deb http://http.debian.net/debian wheezy-backports main" | sudo tee -a /etc/apt/sources.list
 - sudo apt-get update
 - sudo apt-get install --force-yes fastd

script:
 - for f in *; do echo "checking $f..."; fastd --verify-config --config-peer $f || exit 1; done

notifications:
  email:
    recipients:
      - freifunk@hsmr.cc
    on_success: never
    on_failure: change
  irc:
    channels:
      - "irc.hackint.org#hsmr"
    on_success: change
    on_failure: always
    use_notice: true
    skip_join: false
  webhooks:
    urls:
      - http://api.marburg.freifunk.net/yolokey/deploy
    on_success: always
    on_failure: never
    on_start: never
